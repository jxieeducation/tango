<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <title>Thrones</title>
</head>
<body style = "margin:0px;background-color:#2c3e50; color: white; font-family: 'Roboto';">
    <div style = "width:100%; height: 120px;background-color: #95a5a6; color: black;">
        <p style = "font-size: 35px;  margin: auto; display: block; text-align: center; padding: 20px 0px 0px 0px;">Profound Ideas</p>
        <p style = "font-size: 20px; margin: auto; line-height: 30px; display:block; text-align: center;">Learn about the currency of the elite: IDEAs</p>
    </div>
    <!--
    <div style = "float: left; width: 180px; margin-left: 50px;margin-top: 10px;">
        <img src = "http://www.iclarified.com/images/news/23387/86664/86664.png" style = "width: 200px;" >
        <img src = "http://blog.seditionart.com/wp-content/uploads/2012/05/img036.jpg" style = "width: 200px;" >
        <img src = "http://1.bp.blogspot.com/-BJpEd7n6ITc/UH9wWdeUJaI/AAAAAAAAFzQ/Z2sFgC8TkWI/s1600/image.jpg" style = "width: 200px;" >
    </div>
    <div style = "float: right; width: 180px; margin-right: 50px;margin-top: 10px;">
        <img src = "http://technology-magazine-subscriptions.isubscribe.co.uk/images/covers/uk/2/13860/large/cs_cover_WIRED1.png" style = "width: 200px;" >
        <img src = "http://elearningstuff.files.wordpress.com/2010/06/wired005.jpg" style = "width: 200px;" >
        <img src = "http://www.wired.com/images_blogs/business/2011/01/20110131-113831.jpg" style = "width: 200px;" >
    </div>
    -->
    <div style = "width: 640px; height: 500px; margin-top: 30px; margin-left: auto; margin-right: auto;">
        <center><p style = "font-size: 23px; margin: 0px; margin-bottom: 10px;">Games of Thrones Preview</p></center>
        
        <!--
        <a href="#openModal" class = "openM" style = "text-decoration: none; color: gray;">(see summary)</a>
        <div id="openModal" class="modalDialog">
            <div id = "iframe_wrapper">
                <a href="#close" title="Close" class="close">X</a>
                <iframe id = "popup" style = "margin:0px; display: none; z-index: 999999;" data-src="/summary" width="650" height="355" scrolling = "no"></iframe>
            </div>
        </div>

        <script>
            $(".openM").click(function(){
                $("#popup").css("display","block");
                $("#popup").prop("src", function(){
                    return $(this).data("src");
                });
            });
            
            $(".close").click(function(){
                $('#iframe_wrapper').html('<a href="#close" title="Close" class="close">X</a><iframe src="..."></iframe>').html('<a href="#close" title="Close" class="close">X</a><iframe id = "popup" style = "margin:0px; display: none; z-index: 999999;" data-src="/summary" width="650" height="355" scrolling = "no"></iframe>');
                $("#popup").css("display","none");
            });             
        </script>
        <style>
            .modalDialog {
                position: fixed;
                font-family: Arial, Helvetica, sans-serif;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                background: rgba(0,0,0,0.8);
                z-index: 9999;
                opacity:0;
                -webkit-transition: opacity 400ms ease-in;
                -moz-transition: opacity 400ms ease-in;
                transition: opacity 400ms ease-in;
                pointer-events: none;
            }
            .modalDialog:target {
                opacity:1;
                pointer-events: auto;
            }
            .modalDialog > div {
                width: 650px;
                height: 355px;
                position: relative;
                margin: 15% auto;
                padding: 5px 20px 13px 20px;
                border-radius: 10px;
                background: #fff;
                background: -moz-linear-gradient(#fff, #999);
                background: -webkit-linear-gradient(#fff, #999);
                background: -o-linear-gradient(#fff, #999);
            }
            .close {
                background: #606061;
                color: #FFFFFF;
                line-height: 25px;
                position: absolute;
                right: -12px;
                text-align: center;
                top: -10px;
                width: 24px;
                text-decoration: none;
                font-weight: bold;
                -webkit-border-radius: 12px;
                -moz-border-radius: 12px;
                border-radius: 12px;
                -moz-box-shadow: 1px 1px 3px #000;
                -webkit-box-shadow: 1px 1px 3px #000;
                box-shadow: 1px 1px 3px #000;
            }
            .close:hover { background: #00d9ff; }
        </style> -->


        <div id="player"></div>
        <!-- 
        <div style = "margin-top: 20px;">
            <a href = "http://grit.ngrok.com" style = "float:left;"><img src = "http://www.clker.com/cliparts/8/d/6/9/1195445203621300483jean_victor_balin_arrow_blue_left.svg.med.png" style = "height: 30px; width: 35px;"></a>
            <a href = "http://bmodel.ngrok.com" style = "float:right;"><img src = "http://www.clker.com/cliparts/6/0/9/5/1195445238199413807jean_victor_balin_arrow_blue_right.svg.med.png" style = "height: 30px; width: 35px;">
            </a>
        </div> -->

    </div>
    <script>
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '390',
                width: '640',
                videoId: '{{url}}',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        function onPlayerReady(event) {
            //event.target.playVideo();

            //determins if active
            var isactive = true; 
            document.addEventListener("webkitvisibilitychange", tattle, false);
            function tattle() {
                if (document.webkitVisibilityState == "hidden"){
                    isactive = false;
                }else{
                    isactive = true;
                }
            }
            //sends duration and IP address
            var duration = parseInt(player.getDuration());
            $.ajax({
                type: "POST",
                url: "startajax/",
                data: {duration: duration},
            });

            //this sends info to server every second
            window.setInterval(function(){
                //console.info(isactive);
                //$("#k").text();
                var thedata = parseInt(player.getCurrentTime()).toString();
                $.ajax({
                    type: "POST",
                    url: "ajax/",
                    data: {
                        time: thedata,
                        active: isactive.toString(),
                    },
                });
                
            }, 1000); 
        }
        var done = false;
        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING && !done) {
            }
        }
        function stopVideo() {
            player.stopVideo();
        }
    </script>

</body>
